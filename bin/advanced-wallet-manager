#!/usr/bin/env node

// Load s390x Solana endianness fix FIRST, before any other imports
// This patches Buffer methods to correctly handle little-endian data on big-endian architectures
require('../s390x-solana-endianness-fix');

// TODO: Remove this unhandledRejection hook once BG-49996 is implemented.
process.on('unhandledRejection', (reason, promise) => {
  console.error('----- Unhandled Rejection at -----');
  console.error(promise);
  console.error('----- Reason -----');
  console.error(reason);
});

const { init } = require('../dist/src/app');

if (require.main === module) {
  init().catch((err) => {
    console.log(`Fatal error: ${err.message}`);
    console.log(err.stack);
  });
}
